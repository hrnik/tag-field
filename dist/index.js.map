{"version":3,"sources":["TagField.js","index.js"],"names":["TagField","isValidEmail","email","re","test","String","toLowerCase","container","DELIMITERS","EVENTS","emails","subscribers","onEmailListChange","filter","subscribe","eventType","forEach","cb","renderEmails","addEmail","includes","push","removeEmail","splice","indexOf","querySelectorAll","tag","parentNode","removeChild","TagFieldTag","document","createElement","classList","add","TagFieldTagContent","innerHTML","appendChild","TagFieldTagClose","addEventListener","TagFieldInput","insertAdjacentElement","console","log","TagFieldContainer","placeholder","processEmails","emailString","reduce","acc","val","replace","split","str","map","item","trim","handleAddEmail","e","target","value","focus","keyCode","key","length","preventDefault","clipboardData","event","window","getData","getAllValidEmails","setEmailList","emailList","on","EmailEditor","params"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["const isValidEmail = email => {\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n};\n\nconst TagField = ({ container, ...options } = {}) => {\n  const ENTER_CODE = 13;\n  const BACKSPACE_CODE = 8;\n  const DELIMITERS = [\" \", \",\", \";\"];\n  const EVENTS = {\n    EMAIL_LIST_CHANGE: \"email_list_change\",\n  };\n\n  const emails = [];\n  const getAllValidEmails = () => emails.filter(isValidEmail);\n  const subscribers = [];\n\n  const onEmailListChange = () => {\n    subscribers\n      .filter(subscribe => subscribe.eventType === EVENTS.EMAIL_LIST_CHANGE)\n      .forEach(subscribe => subscribe.cb(emails));\n\n    renderEmails();\n  };\n\n  const addEmail = email => {\n    if (emails.includes(email)) return;\n\n    emails.push(email);\n    onEmailListChange();\n  };\n\n  const removeEmail = email => {\n    emails.splice(emails.indexOf(email), 1);\n    onEmailListChange();\n  };\n\n  const renderEmails = () => {\n    const emailsTags = [\n      ...container.querySelectorAll(\".email-editor__email-tag\"),\n    ];\n\n    emailsTags.forEach(tag => tag.parentNode.removeChild(tag));\n\n    emails.forEach(email => {\n      const TagFieldTag = document.createElement(\"div\");\n      TagFieldTag.classList.add(\"email-editor__email-tag\");\n      if (isValidEmail(email)) {\n        TagFieldTag.classList.add(\"email-editor__email-tag--valid\");\n      } else {\n        TagFieldTag.classList.add(\"email-editor__email-tag--invalid\");\n      }\n\n      const TagFieldTagContent = document.createElement(\"div\");\n      TagFieldTagContent.classList.add(\"email-editor__email-tag-content\");\n      TagFieldTagContent.innerHTML = email;\n      TagFieldTag.appendChild(TagFieldTagContent);\n\n      const TagFieldTagClose = document.createElement(\"div\");\n      TagFieldTagClose.classList.add(\"email-editor__email-tag-close\");\n      TagFieldTagClose.addEventListener(\"click\", () => {\n        removeEmail(email);\n      });\n\n      TagFieldTag.appendChild(TagFieldTagClose);\n\n      TagFieldInput.insertAdjacentElement(\"beforebegin\", TagFieldTag);\n    });\n  };\n\n  console.log(container);\n\n  const TagFieldContainer = document.createElement(\"div\");\n  TagFieldContainer.classList.add(\"email-editor\");\n\n  const TagFieldInput = document.createElement(\"input\");\n  TagFieldInput.classList.add(\"email-editor__input\");\n  TagFieldInput.placeholder = \"add more people...\";\n  TagFieldContainer.appendChild(TagFieldInput);\n\n  const processEmails = emailString => {\n    DELIMITERS.reduce((acc, val) => acc.replace(val, \" \"), emailString)\n      .split(\" \")\n      .filter(str => str !== \"\")\n      .map(item => item.trim())\n      .forEach(addEmail);\n  };\n\n  const handleAddEmail = e => {\n    const email = e.target.value;\n    if (!email) return;\n\n    processEmails(e.target.value);\n    e.target.value = \"\";\n    e.target.focus();\n  };\n\n  TagFieldInput.addEventListener(\"blur\", handleAddEmail);\n\n  TagFieldInput.addEventListener(\"keyup\", e => {\n    if (e.keyCode === ENTER_CODE || DELIMITERS.includes(e.key)) {\n      handleAddEmail(e);\n    }\n    if (\n      e.keyCode === BACKSPACE_CODE &&\n      e.target.value == \"\" &&\n      emails.length > 0\n    ) {\n      removeEmail(emails[emails.length - 1]);\n    }\n  });\n\n  //  asdasd@asdasd.com,   asdasd@asdasd11.com\n  TagFieldInput.addEventListener(\"paste\", e => {\n    e.preventDefault();\n    const clipboardData = (event.clipboardData || window.clipboardData).getData(\n      \"text\"\n    );\n    processEmails(clipboardData);\n  });\n\n  container.appendChild(TagFieldContainer);\n\n  return {\n    addEmail,\n    getAllValidEmails,\n    setEmailList: emailList => emailList.forEach(addEmail),\n    on: (eventType, cb) => {\n      subscribers.push({ eventType, cb });\n    },\n  };\n};\n\nexport default TagField;\n","import TagField from \"./TagField\";\nimport \"./style.css\";\n\nconst EmailEditor = params => TagField(params);\n\n// window.TagField = TagField;\nwindow.EmailEditor = EmailEditor;\n\nexport { EmailEditor };\n"]}